var app=angular.module("sugarScope",[]);app.directive("ngEasyTable",["$http",function($http){var _allEntries=[],entries=[],currentEntryIndex=0,loadContent=function(e){$http.get(e.urlFeed).success(function(n){entries=n,_allEntries=n,resizeEntries(e)})},changePage=function(e){currentEntryIndex=e.currentPage*parseInt(e.entriesShown);for(var n=[],r=0;r<parseInt(e.entriesShown);r++)entries[r+currentEntryIndex]&&n.push(entries[r+currentEntryIndex]);e.body=n},resizeEntries=function(e){for(var n=[],r=parseInt(entries.length/parseInt(e.entriesShown))+1,t=0;t<r;t++)n.push(t+1);e.currentPage=0,changePage(e),e.pages=n};return{restrict:"E",link:function(scope,element,attrs){scope.urlFeed=attrs.urlFeed,scope.columns=eval(attrs.columns),scope.id=attrs.id,scope.lazyLoad=!!attrs.lazyLoad&&eval(attrs.lazyLoad),loadContent(scope)},controller:["$scope","$rootScope",function(e,n){e.body=[],e.entriesShown="10",e.pages=[],e.currentPage=0,e.orderColumn={},e.searchBox="",e.sort=function(n){n.sortable&&(n.value!=e.orderColumn.value&&(e.orderColumn={value:n.value,dirAsc:!0}),e.orderColumn.dirAsc=!e.orderColumn.dirAsc,entries.sort(function(r,t){if(e.orderColumn.dirAsc){if(r[n.value]>t[n.value])return 1;if(r[n.value]<t[n.value])return-1}else{if(r[n.value]<t[n.value])return 1;if(r[n.value]>t[n.value])return-1}}),changePage(e))},e.updateClick=function(r){n.$emit(e.id+".ngTable.selectRow",r)},e.requestPage=function(n){loadContent(e,n)},e.changeEntriesShown=function(){resizeEntries(e)},e.changeSearchBox=function(){for(var n=[],r=function(n){for(var r=0;r<e.columns.length;r++)if(e.columns[r].value===n)return!0;return!1},t=0;t<_allEntries.length;t++)for(var a in _allEntries[t])if(_allEntries[t].hasOwnProperty(a)&&"string"==typeof _allEntries[t][a]&&r(a)&&_allEntries[t][a].indexOf(e.searchBox)>-1){n.push(_allEntries[t]);break}e.orderColumn={},entries=n,resizeEntries(e)},e.prevPage=function(){e.currentPage>0&&(e.currentPage--,changePage(e))},e.nextPage=function(){e.currentPage<e.pages.length&&(e.currentPage++,changePage(e))},e.goToPage=function(n){e.currentPage=n,changePage(e)},n.$on("ng-table.refresh",function(n,r){loadContent(e),r()})}],template:function(){return'<div class="row form-inline" style="padding: 5px">  <div class="col-sm-6">    Show    <select ng-model="entriesShown" class="form-control" ng-change="changeEntriesShown()">      <option value="5">5</option>      <option value="10">10</option>      <option value="25">25</option>      <option value="50">50</option>    </select>    values  </div>  <div class="col-sm-6">    <div class="pull-right">      Search:      <input type="text" ng-model="searchBox" ng-change="changeSearchBox()" class="form-control">    </div>  </div></div><div class="row">  <div class="col-sm-12">    <table class="table table-hover">      <thead>        <tr>          <th ng-repeat="col in columns" ng-click="sort(col)">{{col.title}}            <span class="pull-right" ng-if="col.sortable">              <i ng-if="orderColumn.value == col.value && orderColumn.dirAsc" class="glyphicon glyphicon-sort-by-attributes"></i>              <i ng-if="orderColumn.value != col.value" class="glyphicon glyphicon-sort" style="color:#ccc"></i>              <i ng-if="orderColumn.value == col.value && !orderColumn.dirAsc" class="glyphicon glyphicon-sort-by-attributes-alt"></i>            </span>          </th>        </tr>      </thead>      <tbody>        <tr ng-repeat="row in body" table-row="row" ng-dblClick="updateClick(row)"></tr>      </tbody>    </table>  </div></div><div class="row">  <div class="col-sm-12">    <nav aria-label="Page navigation">      <ul class="pagination">        <li>          <a ng-click="prevPage()" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>        </li>        <li ng-repeat="page in pages" ng-class="{\'active\': page == currentPage + 1}">          <a ng-click="goToPage(page-1)">{{page}}</a>        </li>        <li ng-if="lazyLoad">          <a href="#">...</a>        </li>        <li>          <a ng-click="nextPage()" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>        </li>      </ul>    </nav>  </div></div>'}}}]),app.directive("tableRow",["$compile","$rootScope",function(e,n){return{restrict:"A",scope:{row:"=tableRow"},require:"^^ngEasyTable",transclude:!0,link:function(r,t,a){for(var o="",l=r.$parent.columns,i={},s=r.$parent.id,c=0;c<l.length;c++)if("button"===l[c].type){var u=l[c].value;i[c]="";for(var g=0;g<u.length;g++)i[c]+='<a class="'+u[g].class+'" ng-click="onClick(\''+u[g].event+'\', row)" title="'+u[g].tooltip+'">'+u[g].label+"</a> "}for(var c=0;c<l.length;c++){var p="";p=i[c]?i[c]:l[c].preProccessor?l[c].preProccessor(r.row[l[c].value]):r.row[l[c].value],o+="<td>"+p+"</td>"}r.onClick=function(e,r){n.$emit(s+".ngTable."+e,r)},t.html("").append(e(o)(r))}}}]),app.filter("preserveFunctions",function(){var e=function(n){var r="";for(var t in n)if("string"==typeof n[t])r+=","+t+':"'+n[t].replace(/"/g,'\\"')+'"';else if("[object Array]"===Object.prototype.toString.call(n[t])){for(var a="",o=0;o<n[t].length;o++)a+=","+e(n[t][o]);r+=","+t+":["+a.substring(1)+"]"}else r+="object"==typeof n[t]?","+e(n[t]):","+t+":"+n[t].toString();return r=r.substring(1),"{"+r+"}"};return function(n){var r="";if("[object Array]"!==Object.prototype.toString.call(n))r=e(n);else{for(var t=0;t<n.length;t++)r+=","+e(n[t]);r="["+r.substring(1)+"]"}return r}});